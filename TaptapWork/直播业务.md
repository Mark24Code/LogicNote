# OKR


观看直播的用户数

转化按钮，端内引流效果。直播观看率。 （王一凡）


收益点是什么
如何衡量

迁移可行性，开发


O1的kr2

O2的kr1


18:34:43
18:35:03
18:35:23
18:36:03

-----------------

# Dev

https://www.xdrnd.cn/admin-v2/app-manage/app-live-config?region=cn


merge case --> 无法覆盖

================

观察收集：
1.限制规模，计划 消息500 -> 80 左右，我会参考下别公司的 /ok
2.取消滚动动画（耽误时间） /ok
3.取消计算密集型算高度的提示的方式（应该是卡顿来源）
4.长链接重连问题（需要单独观察调试）
5.更改判定新消息的方式，和直接到最下面（消除提示问题）
6.xua 移动到 auth utils /ok

----

心跳 20s

心跳<<<

有效socket，信息

HTTP: socket 重启; socket;

-----


1.BUG: 欧皇连击提示（需要个新交互，不要用toast如果可以）
2.TODO: 线上log（关闭）
3.NEED_CHECK/BUG: iPhone锁屏后的重连
4.BUG: 新消息（fixed）
5.NEED_Feature: 视频推流开关
6.NEED_Feature: 视频默认打开音频
7.BUG/NEED_Feature: 心跳包有不稳定的case，用单独线程


-----------

#  TODO


前端： @张阳(MARK) @沈阳(沈阳的神羊🐑)


done  2. console 调试应该分为精简模式和详细模式，默认都应该关闭   添加 __chat_dev__
done 1.BUG: 欧皇连击提示（需要个新交互，不要用toast如果可以)(使用nextTick之前预留的时间看来够了不会出现瓶颈。连toast也够)
done 4.BUG: 新消息（fixed） done 
done  直播头图的问题  done

----

试了下，video组件无效，这部分保持不变

<这个需要验证可以工作的特点： 最差是按钮状态对了但是无法播放>
6.NEED_Feature: 视频默认打开音频（浏览器限制静音。或者手动播放-B站）
浏览器默认禁止自动播放视频的声音。
<https://www.cnet.com/tech/services-and-software/firefox-will-now-mute-autoplay-audio-automatically/>
<https://gizmodo.com/chrome-finally-mutes-autoplay-videos-by-default-here-s-1825350471>
)


----------------

无法复现
1.BUG/NEED_Feature: 心跳包有不稳定的case，用单独线程
NEED_CHECK/BUG: iPhone锁屏后的重连（锁屏比较久进来后，等了快一分钟了，聊天没重连）
00000000: 1005  是心跳

1）直接锁屏，开启后建立新链接 ok
2）密集消息，锁屏，开启后，重新建立连接 ok
3）300/s 压力，锁屏，开启后建立连接 ok
4）断网，ok


-----
拒绝

X  5.NEED_Feature: 视频推流开关 （目前靠运营保障）
x  5. 兑换码是否考虑等宽 (下载字体是不可能了
6. 再加个 PC 页面宽度调整到 500 或者 600 (影响背景图尺寸)
